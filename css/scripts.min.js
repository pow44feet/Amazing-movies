function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}window.onload=function(){document.body.classList.add("loaded_hiding"),window.setTimeout((function(){document.body.classList.add("loaded"),document.body.classList.remove("loaded_hiding")}),200)},testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}));let prevPos=window.pageYOffset;const header=document.querySelector(".header"),menu=document.querySelector(".menu"),burger=document.querySelector(".burger");function headerSlideUp(){header.style.top=`-${header.offsetHeight}px`}function headerSlideDown(){header.style.top=header.offsetHeight+"px"}window.onscroll=function(){let e=window.pageYOffset;prevPos>e?(header.style.top="0",header.classList.add("header--scrolled")):(headerSlideUp(),menu.classList.remove("menu--active"),burger.classList.remove("burger--active")),prevPos=e,0===prevPos&&header.classList.remove("header--scrolled")},burger.onclick=function(){this.classList.contains("burger--active")?(this.classList.remove("burger--active"),menu.classList.remove("menu--active")):(this.classList.add("burger--active"),menu.classList.add("menu--active"),menuOverlay())};let mobileSearchOn=document.querySelector(".user__plag-search"),searchForm=document.querySelector(".search");const overlayForm=document.querySelector(".overlay-form");function searchShow(){searchForm.classList.add("search--active"),overlayForm.classList.add("overlay--active")}function searchHide(){searchForm.classList.remove("search--active"),overlayForm.classList.remove("overlay--active")}mobileSearchOn.onclick=function(){searchForm.classList.contains("search--active")?searchHide():searchShow()};let closeSearchBtn=document.querySelector(".search .close-button");closeSearchBtn.onclick=function(){searchHide()},$(document).mouseup((function(e){var t=$(".search--active");t.is(e.target)||0!==t.has(e.target).length||searchHide()})),$(document).ready((function(){function e(){$(".popup-wrap").removeClass("popup-active"),$(".overlay").removeClass("overlay--active")}$(".popup-link").on("click",(function(t){t.preventDefault(),$(".popup-wrap").toggleClass("popup-active"),$(".menu").removeClass("menu--active"),$(".burger").removeClass("burger--active"),$("body").toggleClass("body--blocked"),$(".overlay").toggleClass("overlay--active"),window.pageYOffset>0&&headerSlideUp(),$(document).mouseup((function(t){var o=$(".login-wrap");o.is(t.target)||0!==o.has(t.target).length||(e(),$("body").removeClass("body--blocked"))}))})),$(".close-button").on("click",(function(){e(),$("body").removeClass("body--blocked")}))}));var checkClass=function(){$(".film-list__column").hasClass("hide")&&$(".film-list__column").removeClass("hide")};function showItems(){this.removeClass("hide").addClass("show").show()}function hideItems(e){e.removeCLass("show").addCLass("hide").hide()}function loadMore(e){$(e).slice(0,10).show(),$(".show-more-btn").click((function(t){t.preventDefault(),$(e).filter(":hidden").slice(0,5).show(),0==$(e).filter(":hidden").length&&$(".show-more-btn").addClass("hide").hide()}))}$('.flat-catalog__item[data-filter="all"]').click((function(){checkClass(),$(".film-list__column").removeClass("hide").removeClass("show").show()})),$((function(){var e="";$('.flat-catalog__item[data-filter="all"]')&&($(".film-list__column").addClass("hide").hide().slice(0,10).removeClass("hide").addClass("show").show(),0==$(".film-list__column:hidden").length&&$(".show-more-btn").removeClass("show").addClass("hide").hide(),$(".show-more-btn").click((function(e){e.preventDefault(),$(".film-list__column:hidden").slice(0,5).removeClass("hide").addClass("show").show(),0==$(".film-list__column:hidden").length&&$(".show-more-btn").addClass("hide").hide()}))),$(".flat-catalog__item button").click((function(){$(".show-more-btn").removeClass("hide").show(),$(".flat-catalog__item").removeClass("flat-catalog--active"),$(this).parent().addClass("flat-catalog--active"),e=$(this).parent().attr("data-filter"),checkClass();$(".film-list__column").not("."+e).removeClass("show").addClass("hide").hide();var t=$("."+e).removeClass("hide");console.log(t);for(let e=0;e<t.length;e++)(t[e].hasClass="show")&&(t[e].style.display="none");t.slice(0,10).removeClass("hide").addClass("show").show(),0==t.length&&$(".show-more-btn").removeClass("show").addClass("hide").hide(),$(".show-more-btn").click((function(e){e.preventDefault(),t.filter(":hidden").slice(0,5).removeClass("hide").addClass("show").show(),0==t.filter(":hidden").length&&$(".show-more-btn").addClass("hide").hide()}))}))}));let favorites=document.querySelectorAll(".info-line__favorites-icon");for(let e=0;e<favorites.length;e++)favorites[e].onclick=function(){this.classList.contains("info-line__favorites--active")?(this.classList.remove("info-line__favorites--active"),favoriteOff()):(this.classList.add("info-line__favorites--active"),favoriteOn())};function favoriteOn(){let e=document.querySelector(".popup-add-favorites");e.classList.remove("popup-add-favorites--hidden"),setTimeout((function(){e.classList.add("popup-add-favorites--hidden")}),2e3)}function favoriteOff(){let e=document.querySelector(".popup-remove-favorites");e.classList.remove("popup-remove-favorites--hidden"),setTimeout((function(){e.classList.add("popup-remove-favorites--hidden")}),2e3)}let seen=document.querySelectorAll(".info-line__seen-icon");for(let e=0;e<seen.length;e++)seen[e].onclick=function(){this.classList.contains("info-line__seen--active")?(this.classList.remove("info-line__seen--active"),seenOff()):(this.classList.add("info-line__seen--active"),seenOn())};function seenOn(){let e=document.querySelector(".popup-add-seen");e.classList.remove("popup-add-seen--hidden"),setTimeout((function(){e.classList.add("popup-add-seen--hidden")}),2e3)}function seenOff(){let e=document.querySelector(".popup-remove-seen");e.classList.remove("popup-remove-seen--hidden"),setTimeout((function(){e.classList.add("popup-remove-seen--hidden")}),2e3)}$(document).ready((function(){$(".news-slide__column").slice(0,4).show().removeClass("hide").addClass("show"),$(".news-slide__bottom button").on("click",(function(e){$(".news-slide__column:hidden").slice(0,4).show().removeClass("hide").addClass("show"),0==$(".news-slide__column:hidden").length&&$(".news-slide__bottom").addClass("hide").hide()}))}));let btnAdd=document.querySelectorAll(".add-collection");for(let e=0;e<btnAdd.length;e++)btnAdd[e].onclick=function(){this.classList.contains("btn-active")?(this.classList.remove("btn-active"),btnAddOff()):(this.classList.add("btn-active"),btnAddOn())};function btnAddOn(){let e=document.querySelector(".popup-add-list");e.classList.remove("popup-add-list--hidden"),setTimeout((function(){e.classList.add("popup-add-list--hidden")}),2e3)}function btnAddOff(){let e=document.querySelector(".popup-remove-list");e.classList.remove("popup-remove-list--hidden"),setTimeout((function(){e.classList.add("popup-remove-list--hidden")}),2e3)}$((function(){$(".trailer").jqueryVideoLightning({autoplay:1,backdrop_color:"#000",backdrop_opacity:.6,glow:1,glow_color:"#fff",allowfullscreen:1})}));let playTrailer=document.querySelectorAll(".play-trailer");for(i=0;i<playTrailer.length;i++)playTrailer[i].addEventListener("click",(function(){!function(e){let t=e.querySelector(".film-video__link"),o=e.querySelector(".film-video__image"),s=e.querySelector(".film-video__button"),i=createIframe(parseMediaURL(o));t.remove(),s.remove(),e.appendChild(i),t.removeAttribute("href"),e.classList.add("film-video--enabled")}(this.closest(".film-block__body").querySelector(".film-video__video"))}));function findVideos(){let e=document.querySelectorAll(".film-video__video");for(let t=0;t<e.length;t++)setupVideo(e[t])}function setupVideo(e){let t=e.querySelector(".film-video__link"),o=e.querySelector(".film-video__image"),s=e.querySelector(".film-video__button"),i=parseMediaURL(o);e.addEventListener("click",()=>{let o=createIframe(i);t.remove(),s.remove(),e.appendChild(o)}),t.removeAttribute("href"),e.classList.add("film-video--enabled")}function parseMediaURL(e){return e.src.match(/https:\/\/i\.ytimg\.com\/vi\/([a-zA-Z0-9_-]+)\/maxresdefault\.jpg/i)[1]}function createIframe(e){let t=document.createElement("iframe");return t.setAttribute("allowfullscreen",""),t.setAttribute("allow","autoplay"),t.setAttribute("src",generateURL(e)),t.classList.add("film-video__image"),t}function generateURL(e){return"https://www.youtube.com/embed/"+e+"?rel=0&showinfo=0&autoplay=1"}findVideos();